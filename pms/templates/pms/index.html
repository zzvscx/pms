{% extends "base.html" %}
{% load static %}
{% load post_tags %}

{% block title %}
    <title>首页</title>
{% endblock %}

{% block head_extras %}
<link rel="stylesheet" type="text/css" href="{% static 'post/css/index.css' %}">
<!-- <link rel="stylesheet" href="{% static 'post/css/pace.css' %}"> -->
<link rel="stylesheet" href="{% static 'post/css/custom.css' %}">
<link rel="stylesheet" href="{% static 'post/css/highlights/github.css' %}">
{% endblock %}


{% block content %}
{% block carousel %}
<div class="container theme-showcase" role="main">
<div id="carousel-example-generic" class="carousel slide" data-ride="carousel">
    <ol class="carousel-indicators">
      <li data-target="#carousel-example-generic" data-slide-to="0" class="active"></li>
      <li data-target="#carousel-example-generic" data-slide-to="1"></li>
      <li data-target="#carousel-example-generic" data-slide-to="2"></li>
    </ol>
    <div class="carousel-inner" role="listbox">
      <div class="item active">
        <img src="{% static 'post/carousel.jpg' %}" alt="First slide" width="1300" height="200">
      </div>
      <div class="item">
        <img src="{% static 'post/carousel.jpg' %}" alt="Second slide" width="1300" height="200">
      </div>
      <div class="item">
        <img src="{% static 'post/carousel.jpg' %}" alt="Third slide" width="1300" height="200">
      </div>
    </div>
    <a class="left carousel-control" href="#carousel-example-generic" role="button" data-slide="prev">
      <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
      <span class="sr-only">Previous</span>
    </a>
    <a class="right carousel-control" href="#carousel-example-generic" role="button" data-slide="next">
      <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
      <span class="sr-only">Next</span>
    </a>
</div>
</div>
{% endblock %}
<div class="content-body">
    <div class="container">
        <div class="row">
            <main class="col-md-8">
                {% block main %}
                    {% for post in post_list %}
                    <article class="post post-{{ post.pk }}">
                        <header class="entry-headder">
                            <h1 class="entry-meta">
                                <a href="{{ post.get_absolute_url }}"><div class="page-header"><h2>{{ post.title }}</h2></div></a>
                            </h1>
                            <div class="entry-meta">
                                <span class="post-category">{{ post.category.name }}</span>
                                <span class="post_date"><time class="entry-date" datetime="{{ post.created_time }}">{{ post.created_time }}</time></span>
                                <span class="post_author">{{ post.author }}</span>
                            </div>
                        </header>
                        <div class="entry-content clearfix">
                            <p>{{ post.excerpt }}...</p>
                            <div class="read-more cl-effect-14">
                                <a href="{{ post.get_absolute_url }}" class="more-link">继续阅读<span class="meta-nav">→</span></a>
                            </div>
                        </div>
                    </article>
                    {% empty %}
                        <div class="no-post">暂时还没有发布的通告</div>
                    {% endfor %}

                    {% if is_paginated %}
                    <div class="pagination">
                        {% if page_obj.has_previous %}
                            <a href="?page={{ page_obj.previous_page_number }}">上一页</a>
                        {% endif %}
                        <span class="current">第 {{ paeg_obj.number }} 页 / 共 {{ paginator.num_pages }} 页</span>
                        {% if page_obj.has_next %}
                            <a href="?page={{ page_obj.next_page_number }}">下一页</a>
                        {% endif %}
                    </div>
                    {% endif %}
                {% endblock main %}
            </main>

            <aside class="col-md-4">
                {% block toc %}
                {% endblock toc %}
                <div class="widget widget-recent-posts">
                    <div class="panel panel-info">
                        <div class="panel-heading">
                            <h3 class="panel-title">最近通知</h3>
                        </div>
                        {% get_recent_posts as recent_post_list %}
                        <div class="list-group">
                            {% for post in recent_post_list %}
                                <a href="{{ post.get_absolute_url }}" class="list-group-item">{{ post.title }}</a>
                            {% empty %}
                            暂无通告！
                            {% endfor %}
                        </div>
                    </div>
                </div>
                <div class="widget widget-archives">
                    <div class="panel panel-info">
                        <div class="panel-heading">
                            <h3 class="panel-title">归档</h3>
                        </div>
                        {% archives as date_list %}
                        <div class="list-group">
                            {% for date in date_list %}
                                <a href="{% url 'archives' date.year date.month %}" class="list-group-item">{{ date.year }} 年 {{ date.month }} 月</a>
                            {% empty %}
                            暂无归档
                            {% endfor %}
                        </div>
                    </div>
                </div>

                <div class="widget widget-category">
                    <div class="panel panel-info">
                        <div class="panel-heading">
                            <h3 class="panel-title">分类</h3>
                        </div>
                        {% get_categories as category_list %}
                        <div class="list-group">
                            {% for category in category_list %}
                                <a href="{% url 'category' category.pk %}" class="list-group-item">{{ category.name }}<span class="badge">{{ category.num_posts }}</span></a>
                            {% empty %}
                            暂无分类
                            {% endfor %}
                        </div>
                    </div>
                </div>

                <div class="widget widget-tag-category">
                  <div class="panel panel-info">
                    <div class="panel-heading">
                      <h3 class="panel-title">标签云</h3>
                    </div>
                    <div class="panel-body">
                        {% get_tags as tag_list %}
                        <ul class="nav nav-pills" role="tablist">
                        {% for tag in tag_list %}
                            <li role="presentation"><a href="{% url 'tags' tag.pk %}">{{ tag.name }}</li>
                        {% endfor %}
                        </ul>
                    </div>
                </div>
            </aside>
        </div>
    </div>
</div>
{% endblock %}

{% block js_extras %}
    <script src="{% static 'post/js/pace.min.js' %}"></script>
    <script src="{% static 'post/js/modernizr.custom.js' %}"></script>
{% endblock %}